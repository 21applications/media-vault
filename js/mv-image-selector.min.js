(function(b){var c,d,g=b("#mgjp_mv_ir_wrap"),h=b("#mgjp_mv_ir_preview"),e=b("#mgjp_mv_ir_id"),k=b('<p><span class="button button-primary" id="mgjp_mv_ir_select_btn">'+mgjp_mv_options_media.ir_select_btn+"</span></p>"),f=b('<p><span class="button" id="mgjp_mv_ir_restore_default">'+mgjp_mv_options_media.ir_restore_btn+"</span></p>");d=[k];0<e.val()&&(d=[k.children().text(mgjp_mv_options_media.ir_select_btn2).parent()]);mgjp_mv_options_media.ir_default!==e.val()&&d.push(f);g.append(d).on("click","#mgjp_mv_ir_select_btn",
function(a){a.preventDefault();c||(c=wp.media.frames.file_frame=wp.media({id:"mgjp_mv_select_placeholder_modal",title:mgjp_mv_options_media.ir_modal_title,button:{text:mgjp_mv_options_media.ir_modal_btn}}),c.on("select",function(){var a=c.state().get("selection").toJSON();b.get(ajaxurl,{action:"mgjp_mv_get_attachment_image",id:a[0].id,size:mgjp_mv_options_media.ir_size,args:mgjp_mv_options_media.ir_preview_args},function(c){-1!==c&&0!==c&&c&&(e.val(a[0].id),h.hide().html(c).fadeIn(300),1>b("#mgjp_mv_ir_restore_default").length&&
mgjp_mv_options_media.ir_default!==a[0].id?(console.log(f),g.append(f)):mgjp_mv_options_media.ir_default===a[0].id&&b("#mgjp_mv_ir_restore_default").parent().detach())})}));c.open()}).on("click","#mgjp_mv_ir_restore_default",function(){b.post(ajaxurl,{action:"mgjp_mv_restore_default_placeholder_image",nonce:mgjp_mv_options_media.ir_restore_nonce,size:mgjp_mv_options_media.ir_size,args:mgjp_mv_options_media.ir_preview_args},function(a){-1!==a&&0!==a&&a&&(a=JSON.parse(a),e.val(a.id),h.hide().html(a.img).fadeIn(300),
b("#mgjp_mv_ir_restore_default").parent().detach(),mgjp_mv_options_media.ir_default=a.id)})})})(jQuery);